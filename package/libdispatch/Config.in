config BR2_PACKAGE_LIBDISPATCH_ARCH_SUPPORTS
	bool
	default y if BR2_x86_64
	default y if BR2_aarch64
	default y if BR2_arm
	default y if BR2_powerpc
	default y if BR2_powerpc64le
	default y if BR2_mips
	default y if BR2_mipsel
	default y if BR2_mips64
	default y if BR2_mips64el
	default y if BR2_RISCV_64

config BR2_PACKAGE_LIBDISPATCH_TARGET_ARCH
	string
	default "aarch64" if BR2_aarch64
	default "armv5" if BR2_ARM_CPU_ARMV5
	default "armv6" if BR2_ARM_CPU_ARMV6
	default "armv7" if BR2_ARM_CPU_ARMV7A
	default "x86_64" if BR2_x86_64
	default "powerpc" if BR2_powerpc
	default "powerpc64le" if BR2_powerpc64le
	default "mips" if BR2_mips
	default "mipsel" if BR2_mipsel
	default "mips64" if BR2_mips64
	default "mips64el" if BR2_mips64el
	default "riscv64" if BR2_RISCV_64

config BR2_PACKAGE_LIBDISPATCH
	bool "libdispatch"
	depends on BR2_PACKAGE_LIBDISPATCH_ARCH_SUPPORTS
	depends on BR2_TOOLCHAIN_HAS_THREADS
	depends on !BR2_STATIC_LIBS
	depends on BR2_TOOLCHAIN_USES_GLIBC
	select BR2_PACKAGE_LIBBSD
	
	help
	  Grand Central Dispatch (GCD or libdispatch) provides comprehensive support for concurrent code execution on multicore hardware.

	  http://swift.org

comment "libdispatch needs a toolchain w/ Glibc, wchar, threads, C++, dynamic library"
	depends on BR2_PACKAGE_LIBDISPATCH_ARCH_SUPPORTS
	depends on !BR2_TOOLCHAIN_USES_GLIBC || !BR2_TOOLCHAIN_HAS_THREADS || !BR2_INSTALL_LIBSTDCPP \
		|| BR2_STATIC_LIBS || !BR2_USE_WCHAR